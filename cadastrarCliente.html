<!DOCTYPE html>
<html>
  <head>
    <base target="_top" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-color: #f1f1f1;
      }
      header {
        background-color: #6a1b9a;
        color: white;
        padding: 1rem;
        text-align: center;
      }
      header h1 {
        margin: 0;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }
      .versao {
        font-size: 0.8rem;
        color: #e0e0e0;
      }
      .container {
        margin: 2rem auto;
        background-color: white;
        padding: 2rem;
        border-radius: 10px;
        max-width: 500px;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      .form-group {
        display: flex;
        flex-direction: column;
        width: 100%;
      }
      label {
        font-weight: bold;
        margin-bottom: 0.3rem;
      }
      input[type="text"] {
        padding: 0.6rem;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 1rem;
      }
      .btn {
        padding: 0.9rem;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        width: 70%;
        max-width: 400px;
        margin: 0 auto;
      }
      .btn.salvar {
        background-color: #6a1b9a;
        color: white;
      }
      .btn.voltar {
        background-color: #757575;
        color: white;
      }

      /* Estilo do campo de selo */
      .lista-selos {
        list-style: none;
        padding: 0;
        margin-top: 0.5rem;
        max-height: 150px;
        overflow-y: auto;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      .lista-selos li {
        padding: 0.6rem;
        border-bottom: 1px solid #eee;
        cursor: pointer;
      }
      .lista-selos li:hover {
        background-color: #f3e5f5;
      }
      .selecionados {
        margin-top: 1rem;
        font-size: 0.9rem;
      }
      .selecionados span {
        display: inline-block;
        background-color: #6a1b9a;
        color: white;
        padding: 0.3rem 0.6rem;
        border-radius: 15px;
        margin: 0.2rem;
        font-size: 0.85rem;
      }
    </style>
  </head>
  <body>
    <header>
      <h1><i class="fas fa-user-plus"></i> Cadastrar Cliente (Offline)</h1>
      <span class="versao">Versão 1.0</span>
    </header>
    <div class="container">
      <div class="form-group">
        <label>Rota:</label>
        <input type="text" placeholder="Ex: Zona Sul" />
      </div>
      <div class="form-group">
        <label>Cliente:</label>
        <input type="text" placeholder="Nome do cliente" />
      </div>
      <div class="form-group">
        <label>Endereço:</label>
        <input type="text" placeholder="Rua, número..." />
      </div>
      <div class="form-group">
        <label>Bairro:</label>
        <input type="text" placeholder="Ex: Centro" />
      </div>

      <!-- Campo de selos -->
      <div class="form-group">
        <label style="color: #6a1b9a; font-weight: bold; cursor: pointer;" onclick="mostrarCampoBusca()">
          + Adicionar Máquina
        </label>
        <input type="text" id="inputBuscaSelo" placeholder="Buscar selo..." oninput="filtrarSelos()" />
        <ul id="listaSelos" class="lista-selos"></ul>
        <div id="selosSelecionados" class="selecionados"></div>
      </div>

      <button class="btn salvar"><i class="fas fa-save"></i> Salvar Cliente</button>
      <a href="gerenciarClientes.html" class="btn voltar"><i class="fas fa-arrow-left"></i> Voltar ao Menu</a>
    </div>

    <script>
      const selosDisponiveis = [
        'SELO 001', 'SELO 002', 'SELO 003',
        'SELO ALFA', 'SELO BETA', 'SELO GAMMA',
        'MAQ 01', 'MAQ 02', 'MAQ XYZ'
      ];
      const selecionados = [];

      function mostrarCampoBusca() {
        document.getElementById('inputBuscaSelo').focus();
      }

      function filtrarSelos() {
        const input = document.getElementById('inputBuscaSelo').value.toUpperCase();
        const lista = document.getElementById('listaSelos');
        lista.innerHTML = '';

        const filtrados = selosDisponiveis.filter(selo => selo.includes(input));

        filtrados.forEach(selo => {
          const li = document.createElement('li');
          li.textContent = selo;
          li.onclick = () => adicionarSelo(selo);
          lista.appendChild(li);
        });
      }

      function adicionarSelo(selo) {
        if (!selecionados.includes(selo)) {
          selecionados.push(selo);
          atualizarSelosSelecionados();
        }
        document.getElementById('inputBuscaSelo').value = '';
        filtrarSelos();
      }

      function atualizarSelosSelecionados() {
        const div = document.getElementById('selosSelecionados');
        div.innerHTML = '';
        selecionados.forEach(selo => {
          const span = document.createElement('span');
          span.textContent = selo;
          div.appendChild(span);
        });
      }

      // Registrar SW (opcional, já está no index também)
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
          .then(() => console.log('✅ Service Worker registrado'))
          .catch(error => console.error('❌ Erro ao registrar SW:', error));
      }
    </script>
  </body>
</html>
